# Nushell Environment Config File
#
# version = "0.108.0"

# Environment variables
$env.EDITOR = "nvim"
$env.SUDO_EDITOR = $env.EDITOR

# Path configuration
$env.PATH = ($env.PATH | split row (char esep) | prepend [
    ($env.HOME | path join ".config" "composer" "vendor" "bin")
    ($env.HOME | path join ".local" "share" "mise" "installs" "node" "22.10.0" "bin")
    ($env.HOME | path join ".cargo" "bin")
    ($env.HOME | path join ".local" "bin")
    ($env.HOME | path join "go" "bin")
    ($env.HOME | path join ".opencode" "bin")
])

# 1Password SSH agent
{{ if eq .chezmoi.os "linux" -}}
$env.SSH_AUTH_SOCK = ($env.HOME | path join ".1password" "agent.sock")
{{ else if eq .chezmoi.os "darwin" -}}
$env.SSH_AUTH_SOCK = ($env.HOME | path join "Library" "Group Containers" "2BUA8C4S2C.com.1password" "t" "agent.sock")
{{ end }}

# Android SDK configuration
{{ if eq .chezmoi.os "linux" -}}
$env.ANDROID_SDK_ROOT = "/home/raven/Android/Sdk"
$env.ANDROID_HOME = "/home/raven/Android/Sdk"
$env.PATH = ($env.PATH | split row (char esep) | prepend [
    ($env.ANDROID_SDK_ROOT | path join "emulator")
    ($env.ANDROID_SDK_ROOT | path join "platform-tools")
])
$env.JAVA_HOME = "/usr/lib/jvm/java-21-openjdk"
{{ else if eq .chezmoi.os "darwin" -}}
$env.ANDROID_HOME = ($env.HOME | path join "Library" "Android" "sdk")
$env.PATH = ($env.PATH | split row (char esep) | prepend [
    ($env.ANDROID_HOME | path join "emulator")
    ($env.ANDROID_HOME | path join "platform-tools")
])
$env.JAVA_HOME = "/Library/Java/JavaVirtualMachines/zulu-17.jdk/Contents/Home"
{{ end }}

# NVM Directory
$env.NVM_DIR = ($env.HOME | path join ".nvm")

# Starship prompt
try {
    mkdir ~/.cache/starship
    starship init nu | save -f ~/.cache/starship/init.nu
} catch { |e| }

# Zoxide (replaces cd command)
try {
    zoxide init nushell --cmd cd | save -f ~/.zoxide.nu
} catch { |e| }
